<h1>$12. [BOJ] 31095 등수</h1>---<br><strong>Author:</strong><br><strong>Date:</strong> November 9, 2025<br>---<br><br><br><br><figure><img src=posts/test/images/31095.png alt=terminal></figure><h3 id=prob--등수>Prob : <a href=https://www.acmicpc.net/problem/31095>등수</a></h3><h3 id=sol>Sol</h3><p>N과 K에 따라 금성이의 대회 결과 경우를 알아보자. 아래에서 설명할 때 부등호는 학생들의 점수의 크기를 비교하는 용도로 쓰겠다. 금성이를 A로 표현하겠다.</p><ol><li>N = 1일 때<ol><li>K = 1 : 1가지<br>1명 중에서 1등을 하는 경우는 당연히 1개밖에 없다.<ul><li><strong>A</strong></li></ul></li></ol></li><li>N = 2일 때<ol><li>K = 1 : 2가지<ul><li><strong>A</strong> = B</li><li><strong>A</strong> > B</li></ul></li><li>K = 2 : 1<ul><li>B > <strong>A</strong></li></ul></li></ol></li><li>N = 3일 때<ol><li>K = 1 : 6가지<ul><li><strong>A</strong> = B = C</li><li><strong>A</strong> = B > C</li><li><strong>A</strong> = C > B</li><li><strong>A</strong> > B = C</li><li><strong>A</strong> > B > C</li><li><strong>A</strong> > C > B</li></ul></li><li>K = 2 : 4가지<ul><li>B > <strong>A</strong> = C</li><li>C > <strong>A</strong> = B</li><li>B > <strong>A</strong> > C</li><li>C > <strong>A</strong> > B</li></ul></li><li>K = 3 : 3가지<ul><li>B = C > <strong>A</strong></li><li>B > C > <strong>A</strong></li><li>C > B > <strong>A</strong></li></ul></li></ol></li><li>N = 4일 때(예제입력1을 통해 가짓수만 적어두겠다.)<ol><li>K = 1 : 26가지</li><li>K = 2 : 18가지</li><li>K = 3 : 18가지</li><li>k = 4 : 13가지</li></ol></li></ol><p>N과 K에 대해 (N, K)라고 했을 때, dp(N, K)를 N명 중 금성이가 K등을 할 수 있는 경우의 수를 저장하는 테이블로 설정해보자. 열을 N, 행을 K로 표현하겠다.</p><table><thead><tr><th style=text-align:center>▼ K \ N ▶</th><th style=text-align:center>1</th><th style=text-align:center>2</th><th style=text-align:center>3</th><th style=text-align:center>4</th><th style=text-align:center>5</th></tr></thead><tbody><tr><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center>2</td><td style=text-align:center>6</td><td style=text-align:center>26</td><td style=text-align:center>?</td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>0</td><td style=text-align:center>1</td><td style=text-align:center>4</td><td style=text-align:center>18</td><td style=text-align:center>?</td></tr><tr><td style=text-align:center>3</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>3</td><td style=text-align:center>18</td><td style=text-align:center>?</td></tr><tr><td style=text-align:center>4</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>13</td><td style=text-align:center>?</td></tr><tr><td style=text-align:center>5</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>?</td></tr></tbody></table><p>N = 4일 때 상황을 전부 쓰기에는 슬슬 적지 않은 양이기에 관찰을 시작해보자. 먼저 첫번째와 마지막일 때를 보도록 하겠다.</p><ol><li><p>K = 1일 때<br>이는 N = 3인 모든 경우에서 맨 앞에 A를 붙여주기만 하면 된다. N = 3에 이미 A가 포함되어 있지 않냐라고 생각할 수 있는데, 이 3명을 모두 A가 아닌 다른 사람이라고 생각하면 되겠다. 우리는 단순히 경우의 수만 보기 때문에 상관없다. A를 붙일 때, A와 나머지 3명을 &ldquo;A =&rdquo; 또는 &ldquo;A >&ldquo;로 연결할 수 있다. 따라서 N = 3의 각 경우(K = 1~3)에 따라서 2배의 합이 된다. 그럼 다음과 같은 식으로 나타낼 수 있다.<br>$$
dp(4,1) = \sum_{t=1}^{3} 2*dp(3,t)
$$</p></li><li><p>K = 4일 때<br>K = 1일 때와 반대로 N = 3인 모든 경우에서 맨 뒤에 A를 붙이면 된다. 다만, 붙일 때 =는 쓸 수 없고, 반드시 >로만 붙일 수 있다는 점에 주의하자. 왜 그럴까? N = 3에서는 가능한 가장 마지막 등수가 3등인데, K = 4는 반드시 4등을 해야한다. = 로 붙이면 A가 3등인 경우가 생기기 때문에 >로만 연결해야 한다. 따라서 N = 3의 각 경우(K = 1~3)의 모든 합이 된다.<br>$$
dp(4,4) = \sum_{t=1}^{3} dp(3,t)
$$</p></li><li><p>K = 3일 때
K = 3인 경우는 다음과 같은 꼴이 가능하다.<br><figure><img src=posts/test/images/1.png alt=terminal></figure>나는 이것을 해결하기 위해 2개의 부분으로 나눠서 생각했다. 하나는 A가 3등을 하는 부분이고, 다른 하나는 A가 1등을 하는 부분이다. 이를 그림으로 표현하면 아래와 같다.<br><figure><img src=posts/test/images/2.png alt=terminal></figure><figure><img src=posts/test/images/3.png alt=terminal></figure></p><ol><li>첫번째 경우
이는 정확하게 dp(3, 3)에 해당한다. 그런데 이 3명에 누가 포함될 수 있는지 생각해보자. A는 반드시 포함되어야 한다. 그럼 원래 4명중에서 A를 제외한 3명에 대해서 생각해볼 수 있겠다. 이 3명중에서 2명을 뽑으면 된다. 이것은 이제 $_3C_2$로 계산할 수 있다. 따라서 정리하면 첫번째 경우의 계산식은 아래와 같다.<br>$$
dp(3, 3) * {_3}C_2
$$</li><li>두번째 경우
이는 dp(2,1)에 해당한다. 2명중에서 A를 제외한 1명에 대해 생각해보자. 아니, 정확하게는 깊은 생각을 할 필요까지 없다. 왜냐하면 첫번째 경우에서 골라진 사람들을 제외한 나머지 사람들이 자연스럽게 남을 것이기 때문이다. 따라서 두번째 경우의 계산식은 아래와 같다.<br>$$
dp(2, 1)
$$</li></ol><p>첫번째와 두번째 경우에 대해서 dp(4, 3)은 다음과 같이 수식을 세울 수 있다.<br>$$
dp(4, 3) = dp(3, 3) * {_3}C{_2} * dp(2, 1)
$$</p></li><li><p>K = 2일 때
K = 3일 때와 같은 원리를 통해 아래 식을 세울 수 있다.<br>$$
dp(4, 2) = dp(2, 2) * {_3}C{_1} * dp(3, 1)
$$</p></li></ol><p>자, 이제 우리는 N = 4에 대해 꽤나 자세히 생각해봤기에 적절한 점화식을 세울 수 있을 것이다.</p><blockquote><p>dp(n,k)에 대하여,</p><ol><li>K = N일 때<br>$$
dp(n, n) = \sum_{t=1}^{n-1} dp(n-1,t)
$$</li><li>K = 1일 때<br>$$
dp(n, 1) = \sum_{t=1}^{n-1} 2<em>dp(n-1,t) = 2{\sum_{t=1}^{n-1} dp(n-1,t)} = 2</em>dp(n,n)
$$</li><li>$1 &lt; K &lt; N$일 때<br>$$
dp(n, k) = dp(k, k) * {<em>{n-1}}C{</em>{k-1}} * dp(n-k+1, 1)
$$</li></ol></blockquote><p>이 문제에서 ${<em>{n}}C{</em>{k}}$ 의 계산과정 도중 시간이 걸릴 수 있으므로 파스칼의 삼각형을 이용해 ${<em>{n}}C{</em>{k}}$의 값을 저장한 테이블을 따로 만들어 바로 값을 참조할 수 있도록 한다. 나는 이를 combi(n,k)로 저장했다.</p><p>위 설명을 바탕으로 작성한 코드는 아래와 같다.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#ff79c6>#define MAX_N 5000
</span></span></span><span style=display:flex><span><span style=color:#ff79c6>#define MOD 1000000007
</span></span></span><span style=display:flex><span><span style=color:#ff79c6>#include</span> <span style=color:#ff79c6>&lt;iostream&gt;</span><span style=color:#ff79c6>
</span></span></span><span style=display:flex><span><span style=color:#ff79c6></span><span style=color:#ff79c6>using</span> <span style=color:#ff79c6>namespace</span> std;
</span></span><span style=display:flex><span><span style=color:#8be9fd>long</span> <span style=color:#8be9fd>long</span> <span style=color:#8be9fd>int</span> T, N, K,combi[MAX_N<span style=color:#ff79c6>+</span><span style=color:#bd93f9>1</span>][MAX_N<span style=color:#ff79c6>+</span><span style=color:#bd93f9>1</span>],dp[MAX_N<span style=color:#ff79c6>+</span><span style=color:#bd93f9>1</span>][MAX_N<span style=color:#ff79c6>+</span><span style=color:#bd93f9>1</span>];
</span></span><span style=display:flex><span><span style=color:#8be9fd>int</span> <span style=color:#50fa7b>main</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	ios_base<span style=color:#ff79c6>::</span>sync_with_stdio(<span style=color:#8be9fd;font-style:italic>false</span>);
</span></span><span style=display:flex><span>	cin.tie(<span style=color:#8be9fd;font-style:italic>NULL</span>);
</span></span><span style=display:flex><span>	<span style=color:#8be9fd>long</span> <span style=color:#8be9fd>long</span> <span style=color:#8be9fd>int</span> i, j, k;
</span></span><span style=display:flex><span>	combi[<span style=color:#bd93f9>1</span>][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>=</span> combi[<span style=color:#bd93f9>1</span>][<span style=color:#bd93f9>1</span>] <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>1</span>;
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>for</span> (i <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>2</span>; i <span style=color:#ff79c6>&lt;=</span> MAX_N; i<span style=color:#ff79c6>++</span>) <span style=color:#6272a4>// make Combination
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>	{
</span></span><span style=display:flex><span>		<span style=color:#ff79c6>for</span> (j <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>; j <span style=color:#ff79c6>&lt;=</span> i; j<span style=color:#ff79c6>++</span>)
</span></span><span style=display:flex><span>		{
</span></span><span style=display:flex><span>			<span style=color:#ff79c6>if</span> (j <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>0</span>) combi[i][j] <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>1</span>;
</span></span><span style=display:flex><span>			<span style=color:#ff79c6>else</span> combi[i][j] <span style=color:#ff79c6>=</span> (combi[i <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>1</span>][j <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>1</span>] <span style=color:#ff79c6>+</span> combi[i <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>1</span>][j]) <span style=color:#ff79c6>%</span> MOD;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	dp[<span style=color:#bd93f9>1</span>][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>=</span> dp[<span style=color:#bd93f9>1</span>][<span style=color:#bd93f9>1</span>] <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>1</span>;
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>for</span> (i <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>2</span>; i <span style=color:#ff79c6>&lt;=</span> MAX_N; i<span style=color:#ff79c6>++</span>)
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		dp[i][<span style=color:#bd93f9>1</span>] <span style=color:#ff79c6>=</span> (dp[i <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>1</span>][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>*</span> <span style=color:#bd93f9>2</span>) <span style=color:#ff79c6>%</span> MOD;
</span></span><span style=display:flex><span>		dp[i][i] <span style=color:#ff79c6>=</span> dp[i <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>1</span>][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>%</span> MOD;
</span></span><span style=display:flex><span>		dp[i][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>=</span> (dp[i][<span style=color:#bd93f9>1</span>] <span style=color:#ff79c6>+</span> dp[i][i]) <span style=color:#ff79c6>%</span> MOD;
</span></span><span style=display:flex><span>		<span style=color:#ff79c6>for</span> (j <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>2</span>; j <span style=color:#ff79c6>&lt;</span> i; j<span style=color:#ff79c6>++</span>)
</span></span><span style=display:flex><span>		{
</span></span><span style=display:flex><span>			dp[i][j] <span style=color:#ff79c6>=</span> (((dp[j][j] <span style=color:#ff79c6>*</span> combi[i <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>1</span>][j <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>1</span>])<span style=color:#ff79c6>%</span>MOD) <span style=color:#ff79c6>*</span> dp[i <span style=color:#ff79c6>-</span> j <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>1</span>][<span style=color:#bd93f9>1</span>]) <span style=color:#ff79c6>%</span> MOD;
</span></span><span style=display:flex><span>			dp[i][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>=</span> (dp[i][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>+</span> dp[i][j]) <span style=color:#ff79c6>%</span> MOD;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	cin <span style=color:#ff79c6>&gt;&gt;</span> T;
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>while</span> (T<span style=color:#ff79c6>--</span>)
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		cin <span style=color:#ff79c6>&gt;&gt;</span> N <span style=color:#ff79c6>&gt;&gt;</span> K;
</span></span><span style=display:flex><span>		cout <span style=color:#ff79c6>&lt;&lt;</span> dp[N][K] <span style=color:#ff79c6>&lt;&lt;</span> <span style=color:#f1fa8c>&#39;\n&#39;</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>return</span> <span style=color:#bd93f9>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div>